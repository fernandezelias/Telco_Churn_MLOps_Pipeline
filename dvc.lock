schema: '2.0'
stages:
  make_data:
    cmd: python src/make_data.py --out data/processed/telco_churn.csv
    deps:
    - path: data/raw/telco_churn.csv
      hash: md5
      md5: 006527876bfe18c977d74eb4bc59443f
      size: 873370
    - path: src/make_data.py
      hash: md5
      md5: 74eed17ad71e7516e65caab3341551ff
      size: 1653
    outs:
    - path: data/processed/telco_churn.csv
      hash: md5
      md5: ac40be7770ac4b2e22a43d2ec75a2bad
      size: 883371
  preprocess:
    cmd: python src/preprocess_data.py --input data/processed/telco_churn.csv 
      --out data/prepared/telco_churn_prepared.csv
    deps:
    - path: data/processed/telco_churn.csv
      hash: md5
      md5: ac40be7770ac4b2e22a43d2ec75a2bad
      size: 883371
    - path: src/preprocess_data.py
      hash: md5
      md5: 9c4a8df2586273ba9984d06e6592329f
      size: 2576
    outs:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
  train_logreg:
    cmd: python src/train.py --data data/prepared/telco_churn_prepared.csv 
      --model models/telco_logreg.pkl --params params/logreg.yaml --metrics 
      metrics/logreg_metrics.json
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: params/logreg.yaml
      hash: md5
      md5: 43516c06849bdad463b2f0c442fcd7b0
      size: 1328
    - path: src/train.py
      hash: md5
      md5: e4db1d9903c6fa45639cacced06ce774
      size: 5442
    params:
      params/logreg.yaml:
        model.C: 100.0
        model.fit_intercept: true
        model.max_iter: 100
        model.penalty: l2
        model.random_state: 42
        model.solver: lbfgs
        split.test_size: 0.2
    outs:
    - path: metrics/logreg_metrics.json
      hash: md5
      md5: 007c7a6f4e0acb8455b1a35f5253aa09
      size: 159
    - path: models/telco_logreg.pkl
      hash: md5
      md5: f13ac3d6d411af1806b512a1ac26d00f
      size: 1759
  train_tree:
    cmd: python src/train.py --data data/prepared/telco_churn_prepared.csv 
      --model models/telco_tree.pkl --params params/decision_tree.yaml --metrics
      metrics/tree_metrics.json
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: params/decision_tree.yaml
      hash: md5
      md5: af3189636f3178982f6562df53ffb4fc
      size: 1205
    - path: src/train.py
      hash: md5
      md5: e4db1d9903c6fa45639cacced06ce774
      size: 5442
    params:
      params/decision_tree.yaml:
        model.criterion: gini
        model.max_depth: 5
        model.min_samples_leaf: 1
        model.min_samples_split: 2
        model.random_state: 42
        split.test_size: 0.2
    outs:
    - path: metrics/tree_metrics.json
      hash: md5
      md5: 254d8652e8ff84b222575a8d7f009662
      size: 159
    - path: models/telco_tree.pkl
      hash: md5
      md5: 72d346ffbed9a4fe710922f4ac46181f
      size: 7049
  evaluate_logreg:
    cmd: python src/evaluate.py --model models/telco_logreg.pkl --data 
      data/prepared/telco_churn_prepared.csv --metrics reports/logreg_eval.json 
      --plot reports/roc_logreg.png
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: models/telco_logreg.pkl
      hash: md5
      md5: f13ac3d6d411af1806b512a1ac26d00f
      size: 1759
    - path: src/evaluate.py
      hash: md5
      md5: a9592892ef097dce5584975bf9024954
      size: 1915
    outs:
    - path: reports/logreg_eval.json
      hash: md5
      md5: 773bba50cdee4d56becd02d76b1cc5f7
      size: 158
    - path: reports/roc_logreg.png
      hash: md5
      md5: 9b53b698b387bdeea5f2a5742537cec1
      size: 26063
  evaluate_tree:
    cmd: python src/evaluate.py --model models/telco_tree.pkl --data 
      data/prepared/telco_churn_prepared.csv --metrics reports/tree_eval.json 
      --plot reports/roc_tree.png
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: models/telco_tree.pkl
      hash: md5
      md5: 72d346ffbed9a4fe710922f4ac46181f
      size: 7049
    - path: src/evaluate.py
      hash: md5
      md5: a9592892ef097dce5584975bf9024954
      size: 1915
    outs:
    - path: reports/roc_tree.png
      hash: md5
      md5: ec3e08d6c4d22c4190c04cdc13f4eca7
      size: 27225
    - path: reports/tree_eval.json
      hash: md5
      md5: 5c3269902e9b521dae7c8c44bdef6f6d
      size: 159
